- hosts: fsicos2.lunarc.lu.se
  vars:
    quince_host: quince3.lxd
  roles:
    - name: Create the quince3 VM
      role: icos.lxd_vm
      lxd_vm_name: quince3
      lxd_vm_root_size: "200GB"
      lxd_vm_config:
        limits.cpu: "20"
        limits.memory: "64GB"

  tasks:
    # Regular quince.
    - name: Setup proxy for quince
      tags: proxy
      import_role:
        name: icos.quince
        tasks_from: proxy.yml
      vars:
        quince_name: quince
        quince_domains:
          - quince.bcdc.no

    # Quince Intercomparison.
    - name: Setup proxy for quince intercomparison
      tags: proxy
      import_role:
        name: icos.quince
        tasks_from: proxy.yml
      vars:
        quince_name: quince-ic
        quince_domains:
          - icoslabelling.bcdc.no


- hosts: quince3
  roles:
    - role: icos.lxd_guest

    - role: icos.quince
      quince_backup_enable: false
