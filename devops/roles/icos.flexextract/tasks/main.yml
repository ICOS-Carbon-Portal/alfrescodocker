- name: Check that all parameters are defined
  fail:
    msg: "{{ item }} needs to be defined"
  when: vars[item] is undefined
  loop:
    - flexextract_src_dir


- name: Create flexextract user
  user:
    name: "{{ flexextract_user }}"
    home: "{{ flexextract_home | default(omit) }}"
    shell: /bin/bash
    groups: docker
    append: yes

- import_tasks: flexextract.yml
  become: yes
  become_user: flexextract
