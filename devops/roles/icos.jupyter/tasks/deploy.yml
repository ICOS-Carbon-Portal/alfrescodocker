- name: Copy files
  copy:
    dest: "{{ jupyter_home }}"
    src: "{{ item }}"
  loop:
    - build.hub
    - build.notebook
    - Makefile
    - docker-compose.yml
    - jupyterhub_home

- name: Start the proxy
  docker_compose:
    project_src: "{{ jupyter_home }}"
    services:
      - proxy
    state: present

# We're most likely running this file if we've changed something that requires
# the hub to be restarted.
- name: Restart the hub
  docker_compose:
    project_src: "{{ jupyter_home }}"
    services:
      - hub
    restarted: yes
