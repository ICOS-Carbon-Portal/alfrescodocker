- name: Change linux timezone
  # <2017-01-09 mÃ¥n> My version of ansible doesn't have the 'timezone' module so
  # I'll just do the linking myself.
  file:
    dest: /etc/localtime
    src: "{{ linux_timezone_path }}"
    state: link
  # By default we do nothing. I mostly use this for some vagrant VMs that act up.
  when: linux_timezone_path is defined

- name: Add ssh key to root
  authorized_key:
    user: root
    state: present
    key: "{{ lookup('file', lookup('env','HOME') + '/.ssh/id_rsa.pub') }}"
  # Mostly set this when testing
  when: linux_add_ssh_root is defined

- name: Add the EPEL repo
  yum: name=epel-release state=present
  when: ansible_distribution == 'CentOS'

- name: Install utilities
  package: name={{ item }} state=present
  with_items:
    - git
    - mg

- name: Copy utilities
  copy:
    src: retrieve-original.sh
    dest: /usr/local/sbin/retrieve-original
    mode: 0755
