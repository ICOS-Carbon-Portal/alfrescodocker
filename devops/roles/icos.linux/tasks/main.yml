- name: Set timezone to Europe/Stockholm
  timezone:
    name: Europe/Stockholm
  notify: Restart crond

- name: Install packages
  apt:
    name:
      - git
      - mg   # microemacs
      - htop # a better top(1)
      - jq   # like sed for json
      - make # party like it's 1976
      - netcat-openbsd
      - tree

- name: Install bash aliases
  lineinfile:
    path: /root/.bash_profile
    line: "{{ item }}"
    state: present
    create: yes
  loop:
    - "alias sc='systemctl'"
    - "alias jc='journalctl'"

- import_tasks: utils.yml
  tags: linux_utils

- name: Allowing inbound SSH
  ufw:
    rule: allow
    port: ssh
    comment: ssh

- name: Allowing inbound mosh
  ufw:
    rule: allow
    port: 60000:61000
    proto: udp
    comment: mosh

- name: Enabling UFW with default deny policy
  ufw:
    state: enabled
    policy: deny
    direction: incoming
