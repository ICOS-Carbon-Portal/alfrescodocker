# This role is parameterized and cannot be called without arguments.
# It's meant to be used with include_role, like this:
#
# - include_role: name=icos.pgrep
#   vars:  { pgrep_arg: "{{ item }}" }
#   loop: "{{ pgrep_instances }}"
#
# This section will "translate" the argument dict to role variables.

pgrep_name: "pgrep_{{ pgrep_arg.suffix }}"
pgrep_peer_host: "{{ pgrep_arg.peer_host }}"
pgrep_peer_port: "{{ pgrep_arg.peer_port }}"
pgrep_peer_user: "{{ pgrep_arg.peer_user }}"
pgrep_peer_pass: "{{ pgrep_arg.peer_pass }}"
pgrep_peer_cert: "{{ pgrep_arg.peer_cert }}"
pgrep_peer_slot: "{{ pgrep_arg.peer_slot }}"

# The home directory of this service. Here lives the docker-compose.yml file
# along with volume directories.
pgrep_home: "/docker/{{ pgrep_name }}"

# This is a postgresql "conninfo" string, see psql(1) for details.
pgrep_conninfo: >-
  host={{ pgrep_peer_host }}
  port={{ pgrep_peer_port }}
  dbname=postgres
  user={{ pgrep_peer_user }}
  sslmode=verify-ca

# The port used by the prometheus_postgres exporter
pgrep_metric_port: 9187
pgrep_image: postgres:10
