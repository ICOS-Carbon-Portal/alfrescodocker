- name: Add ppa:deadsnakes repository
  apt_repository:
    repo: ppa:deadsnakes/ppa

# The "| default..." hack is needed to avoid warnings about "The loop variable
# 'python3_version'
- name: Install python {{ python3_install_version | default(python3_version) }}
  apt:
    update_cache: yes
    name:
      - "python{{ python3_install_version | default(python3_version) }}-venv"

- name: Install pip
  shell: |
    curl -sS https://bootstrap.pypa.io/get-pip.py | {{ python3_command }}
  args:
    creates: "/usr/local/bin/{{ python3_pip }}"
