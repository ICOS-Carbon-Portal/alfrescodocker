- name: Install python packages
  apt:
    name:
      - python3.8
      - python3.8-venv
      - python3-pip
      - python3-virtualenv
      - python3-click
      # On some targets, this is required for the ansible 'pip' module.
      - virtualenv

- name: Make python3.8 the default python3
  community.general.alternatives:
    name: python3
    link: /usr/bin/python3
    path: /usr/bin/python3.8

- name: Check that python3 version is >= 3.8
  shell: "python3 --version 2>&1 | grep -q '^Python 3.[89]'"
  changed_when: false
