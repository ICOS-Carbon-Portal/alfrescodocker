# This file installs the script/service/timer needed to keep the new-style and
# old-style stilt directory structures in sync (by hardlinking them).

- name: Install sitltweb->stilt sync service
  include_role:
    name: icos.timer
    apply:
      tags: stiltweb_sync
  vars:
    timer_exec: "{{ stiltweb_bindir }}/sync-stiltweb-to-stilt --sync"
    timer_user: "{{ stiltweb_username }}"
    timer_name: sync-stiltweb-to-stilt
    timer_conf: |
      OnBootSec=15min
      OnUnitActiveSec=15min
    timer_envs:
      - PYTHONUNBUFFERED=1
