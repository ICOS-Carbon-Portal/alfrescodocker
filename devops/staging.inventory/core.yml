all:
  vars:
    # the domains are needed both for the host (to find the buildInfo url) and
    # for the server (to set up proxy)
    cpmeta_domains:
      - metastaging.icos-cp.eu

    cpdata_domains:
      - datastaging.icos-cp.eu

    cpauth_domains:
      - authstaging.icos-cp.eu

    doi_domains:
      - doistaging.icos-cp.eu

  hosts:
    core_host:
      # ansible
      ansible_host: fsicos2.lunarc.lu.se
      ansible_port: 60520

      # cpmeta - application
      cpmeta_filestorage_target: "{{ cpmeta_home }}/filestorage"
      cpmeta_backup_enable: false
      cpmeta_config_files:
        - application_production.conf
        - application_staging_amendment.conf

      # cpdata - application
      # when running in an lxd VM, bind all interfaces so that we're reachable
      # from the host.
      cpdata_bind_addr: "0.0.0.0"
      cpdata_filestorage_target: "{{ cpdata_home }}/dataAppStorage"
      cpdata_config_files:
        - application_production.conf
        - application_staging_amendment.conf

      doi_bind_addr: "0.0.0.0"

    core_server:
      # ansible
      ansible_host: fsicos2.lunarc.lu.se

      # cpmeta - proxy
      cpmeta_host: staging.lxd
      cpmeta_nginxsite_name: cpmeta-staging
      cpmeta_certbot_name: cpmeta-staging

      # cpdata - proxy
      cpdata_host: staging.lxd
      cpdata_certbot_name: cpdata-staging
      cpdata_nginxsite_name: cpdata-staging

      # cpauth - proxy
      cpauth_host: staging.lxd
      cpauth_certbot_name: cpauth-staging
      cpauth_nginxsite_name: cpauth-staging

      # restheart - proxy
      restheart_host: staging.lxd
      restheart_nginxsite_name: restheart-staging
      restheart_certbot_name: restheart-staging
      restheart_domains:
        - restheartstaging.icos-cp.eu

      # doi - proxy
      doi_host: staging.lxd
      doi_certbot_name: doi-staging
