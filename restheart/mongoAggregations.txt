{ "aggrs" : [

	{
		"type" : "pipeline",
		"uri" : "uniqueIpCountsPerMonth",
		"stages" : [
			{ "_$group" : {"_id" : {year: "$year", month: "$month", ip: "$ip"}}},
			{ "_$group" : {
				"_id" : {year: "$_id.year", month: "$_id.month"},
				"count" : { "_$sum" : 1 }
			} },
			{ "_$project" : {
				year: "$_id.year",
				month: "$_id.month",
				count: true,
				_id: false
			} },
			{ "_$sort" : {year: 1, month: 1}}
		]
	}

]}

